{% extends 'layout.html.twig' %}

{% block title 'Forum' %}

{% block css %}
    <link rel="stylesheet" href="{{ asset('css/accueil.css') }}">
{% endblock %}

{% block body %}
    <div class="jumbotron">
        <div class="row justify-content-center">
            <div class="col-md-12">
                <h2 class="text-center">« S’organiser et permettre aux entreprises de relancer leurs activités grâce à nos visières » </h2>
            </div>
        </div>
        <br />
        <div class="row justify-content-center">
            <div class="col-md-6 d-inline-flex">
                <img class="bandeau" src="images/forum/bandeauForum.jpg" alt="BandeauForum">
            </div>
            <div class="col-xl-4 top-text">
                <h4>Forum de discussion</h4>
                <br />
                <p class="text-justify">Ce forum est à disposition des utilisateurs connectés afin de poser des questions ou de répondre
                    à d’autres afin de promouvoir la communication et l’échange. Il sera modéré par des volontaires
                    du personnel hospitalier, soit des personnes avec de l’expérience dans le domaine qui seront heureux de vous aider. </p>
                <center><a href="{{ path('forum.new') }}" class="btn btn-warning">Ajouter un sujet de discussion</a></center>
            </div>
        </div>
    </div>

    {% for message in app.flashes('success') %}
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-6 text-center">
                    <div class="alert alert-success text-center">
                        {{ message }}
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}

    <br />

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-6 text-center">
                <h4>Les sujets disponibles</h4>
                <hr><br />
            </div>
        </div>
        <br/>
        <div class="row">
            {% for subject in subjects %}
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">
                                <a class="text-warning" href="{{ path('forum.show', {id: subject.id, slug: subject.slug }) }}">{{ subject.type.name }}: {{ subject.name }}</a>

                            </h5>
                            <p class="card-text text-justify">{{ subject.description|length > 255 ? subject.description|slice(0, 255) ~ ' …' : subject.description }}
                                <br>
                            <p class="card-text text-right">{{ subject.user.firstName }} {{ subject.user.lastName }}: Le {{ subject.createdAt }}</p>
                        </div>
                    </div>
                    <br />
                </div>
            {% endfor %}
        </div>
        <br />
        <div class="row justify-content-center">
            <div class="pagination">
                {{ knp_pagination_render(subjects) }}
            </div>
        </div>
    </div>
{% endblock %}